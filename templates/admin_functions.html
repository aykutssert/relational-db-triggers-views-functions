<!-- templates/admin_functions.html -->
{% extends "base.html" %}
{% block title %}Database Functions{% endblock %}
{% block content %}
<h1>Database Functions</h1>

<div class="card" style="background: #e8f5e8; margin-bottom: 20px;">
    <h3>âš™ï¸ 5 FarklÄ± Database Function</h3>
    <p>AÅŸaÄŸÄ±daki function'lar database'de tanÄ±mlanmÄ±ÅŸ ve gerÃ§ek zamanlÄ± olarak Ã§alÄ±ÅŸÄ±r. Her birini test edebilir ve sonuÃ§larÄ±nÄ± gÃ¶rebilirsiniz.</p>
</div>

<div class="grid">
    <div class="card">
        <h3>ğŸ”¢ Function 1: Kitap Stok Sorgulama</h3>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
            <code>get_book_stock(book_id)</code>
        </div>
        <p><strong>VarsayÄ±lan Test (Kitap ID: 1):</strong></p>
        <p style="background: #e3f2fd; padding: 10px; border-radius: 4px; font-size: 18px;">
            <strong>{{ functions_data.book_stock }} adet</strong>
        </p>
        
        <form method="POST" action="{{ url_for('test_function') }}">
            <input type="hidden" name="function_name" value="get_book_stock">
            <div class="form-group">
                <label>Kitap ID:</label>
                <input type="number" name="param" value="1" min="1">
            </div>
            <button type="submit" class="btn btn-info">ğŸ” Test Et</button>
        </form>
    </div>

    <div class="card">
        <h3>ğŸ’° Function 2: SipariÅŸ Toplam Hesaplama</h3>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
            <code>calculate_order_total(order_id)</code>
        </div>
        <p><strong>VarsayÄ±lan Test (SipariÅŸ ID: 1):</strong></p>
        <p style="background: #e8f5e8; padding: 10px; border-radius: 4px; font-size: 18px;">
            <strong>{{ functions_data.order_total }} TL</strong>
        </p>
        
        <form method="POST" action="{{ url_for('test_function') }}">
            <input type="hidden" name="function_name" value="calculate_order_total">
            <div class="form-group">
                <label>SipariÅŸ ID:</label>
                <input type="number" name="param" value="1" min="1">
            </div>
            <button type="submit" class="btn btn-info">ğŸ’° Test Et</button>
        </form>
    </div>

    <div class="card">
        <h3>ğŸ“š Function 3: Kategoriye GÃ¶re Kitaplar</h3>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
            <code>get_books_by_category(category_name)</code>
        </div>
        <p><strong>VarsayÄ±lan Test (Kategori: Roman):</strong></p>
        <div style="background: #fff3e0; padding: 10px; border-radius: 4px; max-height: 100px; overflow-y: auto;">
            <strong>{{ functions_data.books_by_category }}</strong>
        </div>
        
        <form method="POST" action="{{ url_for('test_function') }}">
            <input type="hidden" name="function_name" value="get_books_by_category">
            <div class="form-group">
                <label>Kategori AdÄ±:</label>
                <select name="param">
                    <option value="Roman">Roman</option>
                    <option value="Bilim">Bilim</option>
                    <option value="Tarih">Tarih</option>
                    <option value="Felsefe">Felsefe</option>
                    <option value="Ã‡ocuk">Ã‡ocuk</option>
                    <option value="Teknoloji">Teknoloji</option>
                </select>
            </div>
            <button type="submit" class="btn btn-info">ğŸ“š Test Et</button>
        </form>
    </div>

    <div class="card">
        <h3>âœï¸ Function 4: YazarÄ±n Kitap SayÄ±sÄ±</h3>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
            <code>get_author_book_count(author_id)</code>
        </div>
        <p><strong>VarsayÄ±lan Test (Yazar ID: 1 - Orhan Pamuk):</strong></p>
        <p style="background: #ffebee; padding: 10px; border-radius: 4px; font-size: 18px;">
            <strong>{{ functions_data.author_book_count }} kitap</strong>
        </p>
        
        <form method="POST" action="{{ url_for('test_function') }}">
            <input type="hidden" name="function_name" value="get_author_book_count">
            <div class="form-group">
                <label>Yazar ID:</label>
                <input type="number" name="param" value="1" min="1">
                <small style="color: #666; display: block;">1:Orhan Pamuk, 2:Sabahattin Ali, 3:NazÄ±m Hikmet...</small>
            </div>
            <button type="submit" class="btn btn-info">âœï¸ Test Et</button>
        </form>
    </div>

    <div class="card">
        <h3>ğŸ“Š Function 5: Ortalama SipariÅŸ DeÄŸeri</h3>
        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
            <code>get_average_completed_order_value()</code>
        </div>
        <p><strong>TamamlanmÄ±ÅŸ SipariÅŸlerin OrtalamasÄ±:</strong></p>
        <p style="background: #e8f5e8; padding: 10px; border-radius: 4px; font-size: 18px;">
            <strong>{{ functions_data.avg_order_value }} TL</strong>
        </p>
        
        <form method="POST" action="{{ url_for('test_function') }}">
            <input type="hidden" name="function_name" value="get_average_completed_order_value">
            <button type="submit" class="btn btn-info">ğŸ“Š Yeniden Hesapla</button>
        </form>
        <small style="color: #666;">Bu function parametresiz Ã§alÄ±ÅŸÄ±r ve completed durumundaki tÃ¼m sipariÅŸlerin ortalamasÄ±nÄ± alÄ±r.</small>
    </div>
</div>

<div class="card" style="background: #e3f2fd; margin-top: 30px;">
    <h4>ğŸ”§ Function'lar HakkÄ±nda Teknik Bilgi</h4>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
        <div>
            <h5>âš™ï¸ Function Ã–zellikleri:</h5>
            <ul style="padding-left: 20px;">
                <li><strong>Stok KontrolÃ¼:</strong> SipariÅŸ vermeden Ã¶nce</li>
                <li><strong>Fiyat Hesaplama:</strong> Toplam tutarlarÄ± hesapla</li>
                <li><strong>Raporlama:</strong> Kategori bazlÄ± listeler</li>
                <li><strong>Ä°statistik:</strong> Yazar performansÄ±</li>
                <li><strong>Analiz:</strong> Ortalama deÄŸerler</li>
            </ul>
        </div>
    </div>
</div>

<div class="card" style="background: #fff3e0;">
    <h4>ğŸ¯ Function Test Rehberi</h4>
    <p>Function'larÄ± test etmek iÃ§in:</p>
    <ol style="padding-left: 20px; margin: 10px 0;">
        <li><strong>Mevcut ID'leri kullanÄ±n:</strong> Kitap ID'leri 1-10, SipariÅŸ ID'leri 1-5 arasÄ±</li>
        <li><strong>FarklÄ± parametreler deneyin:</strong> SonuÃ§larÄ±n nasÄ±l deÄŸiÅŸtiÄŸini gÃ¶zlemleyin</li>
        <li><strong>Null deÄŸerleri test edin:</strong> Olmayan ID'ler iÃ§in 0 dÃ¶ner</li>
        <li><strong>GerÃ§ek zamanlÄ±:</strong> SipariÅŸ verdiÄŸinizde ortalamalar gÃ¼ncellenir</li>
    </ol>
</div>
{% endblock %}